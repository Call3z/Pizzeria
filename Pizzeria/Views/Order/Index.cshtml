@model Pizzeria.Models.OrderViewModels.OrderViewModel
@{
    ViewData["Title"] = "Index";
    var grouped = Model.Dishes.GroupBy(x => x.Category.Name);
}

<h2>Index</h2>

@{Html.RenderPartial("_CartPartial", Model.DishesInCart);}

@foreach(var category in grouped)
{
    <h1>@category.Key</h1>
    @foreach(var dish in category)
    {
        <h2>@dish.Name</h2>
        <p>Price: @dish.Price</p>
        <p>Ingredients: @string.Join(",", dish.DishIngredients.OrderBy(x=> x.Ingredient.Name).Select(x=> x.Ingredient.Name))</p>
        <a asp-controller="Order" asp-action="Add" asp-route-id="@dish.DishId">Add to cart</a>
    }
}
